# Claude Code é¡¹ç›®è§„èŒƒ - Viduræ™ºèƒ½è°ƒåº¦å™¨é¡¹ç›®

## ğŸ“ æ–‡ä»¶å¤¹ç®¡ç†è§„èŒƒ - æœ€é«˜ä¼˜å…ˆçº§

### æ ¸å¿ƒåŸåˆ™
- **ç®€æ´æ€§ä¼˜å…ˆ**ï¼šé¿å…è¿‡åº¦åµŒå¥—å’Œå†—ä½™ç›®å½•
- **åŠŸèƒ½å¯¼å‘**ï¼šæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ï¼Œä¸æŒ‰æŠ€æœ¯æ ˆåˆ†ç±»
- **ç‰ˆæœ¬æ§åˆ¶å‹å¥½**ï¼šç»“æ„ç¨³å®šï¼Œæ–¹ä¾¿gitè·Ÿè¸ªå’Œåä½œ

### æ ‡å‡†ç›®å½•ç»“æ„ï¼ˆæ¨èé‡æ„ç›®æ ‡ï¼‰
```
$PROJECT_NAME/                 # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ demo/                      # ç¤ºä¾‹ä»£ç ï¼ˆè·å–æ•°æ®ã€ä»£ç è§„èŒƒã€å·¥å…·ä»£ç ç­‰ï¼‰
â”œâ”€â”€ src/                       # æ ¸å¿ƒä»£ç ï¼ˆæ¨¡å—åŒ–è®¾è®¡ï¼Œå‚æ•°åŒ–è¾“å…¥ï¼Œä¾¿äºå¤ç”¨ï¼‰
â”œâ”€â”€ configs/                   # é…ç½®æ–‡ä»¶ï¼ˆæ”¯æŒ json/yaml/tomlï¼Œä¾› src/scripts ä½¿ç”¨ï¼‰
â”œâ”€â”€ data/                      # æ•°æ®å­˜å‚¨ï¼ˆéœ€å¤„ç†æˆ–å­˜å–çš„æ•°æ®ï¼‰
â”œâ”€â”€ experiments/               # å®éªŒé…ç½®ï¼ˆå†å²å¤ç°å®éªŒçš„å‚æ•°ï¼‰
â”œâ”€â”€ outputs/                   # è¾“å‡ºç»“æœï¼ˆå®éªŒè¾“å‡ºå­˜æ”¾å¤„ï¼‰
â”œâ”€â”€ logs/                      # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ tests/                     # æµ‹è¯•è„šæœ¬ï¼ˆpytest å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•ï¼‰
â”œâ”€â”€ scripts/                   # è„šæœ¬ä»£ç ï¼ˆè¿è¡Œè„šæœ¬ã€æµ‹è¯•è„šæœ¬ç­‰ï¼‰
â”œâ”€â”€ tmp/                       # ä¸´æ—¶æ–‡ä»¶ï¼ˆä¸´æ—¶æµ‹è¯•è„šæœ¬ï¼Œç”¨å®Œå³åˆ ï¼‰
â”œâ”€â”€ docs/                      # è‡ªå®šä¹‰æ–‡æ¡£ï¼ˆè¯´æ˜æ–‡æ¡£ç­‰ï¼‰
â””â”€â”€ notebooks/                 # Jupyter Notebook æ ¼å¼çš„å¯è§†åŒ–æŠ¥å‘Š
```
### æ–‡ä»¶ç®¡ç†ç­–ç•¥
1. **éµå¾ªæ ‡å‡†ç»“æ„**ï¼šä¸¥æ ¼æŒ‰ç…§æ ‡å‡†ç›®å½•ç»„ç»‡æ–°æ–‡ä»¶
2. **æ¸è¿›å¼è¿ç§»**ï¼šé€æ­¥å°†ç°æœ‰æ–‡ä»¶è¿ç§»åˆ°æ ‡å‡†ä½ç½®
3. **é…ç½®å‚æ•°åŒ–**ï¼šæ‰€æœ‰ç¡¬ç¼–ç è·¯å¾„æ”¹ä¸ºé…ç½®é©±åŠ¨
4. **å®éªŒå¯å¤ç°**ï¼šæ¯ä¸ªå®éªŒåœ¨experiments/ä¸­ä¿å­˜å®Œæ•´é…ç½®

### ç›®å½•åŠŸèƒ½è¯´æ˜
- `src/`ï¼šæ ¸å¿ƒä»£ç ï¼Œæ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºå¤ç”¨å’Œæµ‹è¯•
- `scripts/`ï¼šè¿è¡Œè„šæœ¬ï¼ŒåŒ…æ‹¬è®­ç»ƒã€æµ‹è¯•ã€æ•°æ®å¤„ç†ç­‰
- `configs/`ï¼šæ‰€æœ‰é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒjson/yamlæ ¼å¼
- `data/`ï¼šåŸå§‹æ•°æ®ã€å¤„ç†åæ•°æ®ã€è®­ç»ƒæ•°æ®é›†
- `experiments/`ï¼šå†å²å®éªŒçš„é…ç½®å‚æ•°ï¼Œä¾¿äºå¤ç°
- `outputs/`ï¼šå®éªŒè¾“å‡ºç»“æœï¼ŒåŒ…æ‹¬æ¨¡å‹ã€æŠ¥å‘Šã€å¯¹æ¯”ç»“æœ
- `logs/`ï¼šæ—¥å¿—æ–‡ä»¶ï¼ŒæŒ‰æ¨¡å—å’Œæ—¶é—´ç»„ç»‡
- `tests/`ï¼šå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•è„šæœ¬
- `tmp/`ï¼šä¸´æ—¶æ–‡ä»¶å­˜å‚¨ï¼ŒåŒ…æ‹¬ä¸´æ—¶æµ‹è¯•è„šæœ¬ï¼ˆç”¨å®Œå³åˆ ï¼‰
- `demo/`ï¼šç¤ºä¾‹ä»£ç å’Œä½¿ç”¨è¯´æ˜
- `notebooks/`ï¼šJupyteråˆ†ææŠ¥å‘Šå’Œå¯è§†åŒ–

## ğŸš¨ æ ¸å¿ƒç¼–ç¨‹è§„èŒƒ - ä¸¥æ ¼æ‰§è¡Œ

### å…«è£å…«è€»ç¼–ç¨‹åŸºæœ¬åŸåˆ™

1. **ä»¥æš—çŒœæ¥å£ä¸ºè€»ï¼Œä»¥è®¤çœŸæŸ¥é˜…ä¸ºè£** - ç¦æ­¢è‡†æµ‹APIè¡Œä¸ºï¼Œå¿…é¡»æŸ¥é˜…æ–‡æ¡£å’Œä»£ç ç¡®è®¤
2. **ä»¥æ¨¡ç³Šæ‰§è¡Œä¸ºè€»ï¼Œä»¥å¯»æ±‚ç¡®è®¤ä¸ºè£** - ä¸ç¡®å®šçš„å®ç°å¿…é¡»å…ˆå‘ç”¨æˆ·ç¡®è®¤ï¼Œé¿å…æ¨¡ç³Šæ“ä½œ
3. **ä»¥é»˜è®¤å¿½ç•¥ä¸ºè€»ï¼Œä»¥ä¸»åŠ¨æŠ¥å‘Šä¸ºè£** - é‡åˆ°å¼‚å¸¸ã€è­¦å‘Šã€é”™è¯¯å¿…é¡»ä¸»åŠ¨æŠ¥å‘Šï¼Œä¸å¾—é™é»˜å¿½ç•¥
4. **ä»¥éšå¼å‡è®¾ä¸ºè€»ï¼Œä»¥æ˜¾å¼éªŒè¯ä¸ºè£** - æ‰€æœ‰å‡è®¾å¿…é¡»é€šè¿‡ä»£ç éªŒè¯ï¼Œç¦æ­¢éšå¼ä¾èµ–
5. **ä»¥éšæ„ä¿®æ”¹ä¸ºè€»ï¼Œä»¥è°¨æ…è°ƒè¯•ä¸ºè£** - ä¿®æ”¹å‰å¿…é¡»ç†è§£åŸç†ï¼Œç¦æ­¢è¯•é”™å¼ç¼–ç¨‹
6. **ä»¥è¡¨é¢åº”ä»˜ä¸ºè€»ï¼Œä»¥æ·±å…¥ç†è§£ä¸ºè£** - è§£å†³é—®é¢˜å¿…é¡»æ‰¾åˆ°æ ¹æœ¬åŸå› ï¼Œç¦æ­¢è¡¨é¢ä¿®è¡¥
7. **ä»¥å¤åˆ¶ç²˜è´´ä¸ºè€»ï¼Œä»¥åŸåˆ›æ€è€ƒä¸ºè£** - ç†è§£æ¯è¡Œä»£ç å«ä¹‰ï¼Œç¦æ­¢ç›²ç›®å¤åˆ¶
8. **ä»¥å­¤ç«‹å¼€å‘ä¸ºè€»ï¼Œä»¥ååŒæ²Ÿé€šä¸ºè£** - ä¸»åŠ¨æ±‡æŠ¥è¿›åº¦å’Œé—®é¢˜ï¼Œå¯»æ±‚æŒ‡å¯¼å’Œåé¦ˆ
9. **ä»¥æµ‹è¯•éªŒè¯ä¸ºè€»ï¼Œä»¥ä»£ç é˜…è¯»ä¸ºè£** - éªŒè¯æ¥å£/å‡½æ•°/é…ç½®åŠŸèƒ½æ—¶å¿…é¡»é˜…è¯»ä»£ç ç¡®è®¤ï¼Œç¦æ­¢åˆ›å»ºæµ‹è¯•è„šæœ¬éªŒè¯

### ğŸ§ª æµ‹è¯•è„šæœ¬ç®¡ç†è§„èŒƒ - ä¸¥æ ¼æ‰§è¡Œ

**åŠŸèƒ½éªŒè¯æ–¹æ³•**ï¼š
- âœ… **ä»£ç é˜…è¯»ä¼˜å…ˆ** - éªŒè¯æ¥å£/å‡½æ•°/é…ç½®åŠŸèƒ½æ—¶ï¼Œå¿…é¡»é€šè¿‡é˜…è¯»æºä»£ç ç¡®è®¤ï¼Œä¸å¾—åˆ›å»ºæµ‹è¯•è„šæœ¬
- âŒ **ç¦æ­¢æµ‹è¯•è„šæœ¬éªŒè¯** - ä¸¥ç¦ä¸ºéªŒè¯åŠŸèƒ½æ­£ç¡®æ€§è€Œåˆ›å»ºä¸´æ—¶æµ‹è¯•ä»£ç 
- âœ… **ç›´æ¥è°ƒç”¨éªŒè¯** - å¦‚éœ€è¿è¡ŒéªŒè¯ï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œæˆ–ç°æœ‰å…¥å£ç‚¹è°ƒç”¨

**ä¸´æ—¶æµ‹è¯•è„šæœ¬è§„èŒƒ**ï¼ˆä»…é™å¿…è¦æƒ…å†µï¼‰ï¼š
- ğŸ“ **ç»Ÿä¸€å­˜å‚¨ä½ç½®** - æ‰€æœ‰ä¸´æ—¶æµ‹è¯•è„šæœ¬å¿…é¡»å­˜å‚¨åœ¨ `tmp/` æ–‡ä»¶å¤¹ä¸­
- ğŸ—‘ï¸ **åŠæ—¶æ¸…ç†** - æµ‹è¯•å®Œæˆåç«‹å³åˆ é™¤ä¸´æ—¶è„šæœ¬ï¼Œä¸å¾—ç•™å­˜
- ğŸ“ **æ˜ç¡®æ ‡è¯†** - ä¸´æ—¶è„šæœ¬å¿…é¡»ä»¥ `test_` æˆ– `temp_` å‰ç¼€å‘½å
- â° **ç”Ÿå‘½å‘¨æœŸç®¡ç†** - ä¸´æ—¶è„šæœ¬ä»…åœ¨å½“å‰ä¼šè¯æœ‰æ•ˆï¼Œä¸å¾—æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶

**ç¤ºä¾‹å¯¹æ¯”**ï¼š
```bash
# âŒ é”™è¯¯åšæ³•ï¼šåˆ›å»ºæµ‹è¯•è„šæœ¬éªŒè¯
echo "# æµ‹è¯•rewardå‡½æ•°" > test_reward.py
python test_reward.py

# âœ… æ­£ç¡®åšæ³•ï¼šç›´æ¥é˜…è¯»æºç 
# æŸ¥çœ‹ src/core/reward.py ç¡®è®¤å‡½æ•°æ¥å£å’Œå®ç°é€»è¾‘
# ç›´æ¥è¿è¡Œï¼špython -c "from src.core.reward import calculate_reward; print(calculate_reward.__doc__)"

# ğŸ†˜ å¿…è¦æ—¶çš„ä¸´æ—¶æµ‹è¯•ï¼ˆç«‹å³åˆ é™¤ï¼‰
mkdir -p tmp/
echo "import sys; print(sys.path)" > tmp/test_imports.py
python tmp/test_imports.py
rm tmp/test_imports.py
```

### ğŸ”¥ æ–‡ä»¶å‘½åè§„èŒƒ - ä¸¥æ ¼ç¦æ­¢

**ç¦ç”¨å‰ç¼€åç¼€åˆ—è¡¨**ï¼š
- âŒ `enhanced_*` / `*_enhanced` - ç¦æ­¢enhancedå‰ç¼€åç¼€
- âŒ `integrated_*` / `*_integrated` - ç¦æ­¢integratedå‰ç¼€åç¼€
- âŒ `cleaned_*` / `*_cleaned` / `*_clean` - ç¦æ­¢cleanç›¸å…³å‘½å
- âŒ `improved_*` / `*_improved` - ç¦æ­¢improvedå‰ç¼€åç¼€
- âŒ `optimized_*` / `*_optimized` - ç¦æ­¢optimizedå‰ç¼€åç¼€ï¼ˆé¡¹ç›®ç›®å½•åé™¤å¤–ï¼‰
- âŒ `advanced_*` / `*_advanced` - ç¦æ­¢advancedå‰ç¼€åç¼€
- âŒ `*_v2` / `*_new` / `*_old` / `*_temp` - ç¦æ­¢ç‰ˆæœ¬å’Œä¸´æ—¶æ ‡è¯†ç¬¦

**æ­£ç¡®å‘½ååŸåˆ™**ï¼š
- âœ… **åŠŸèƒ½å¯¼å‘å‘½å** - ç›´æ¥æè¿°æ–‡ä»¶åŠŸèƒ½ï¼š`reward_system.py`ã€`sac_trainer.py`
- âœ… **æ¨¡å—åŒ–å‘½å** - æŒ‰æ¨¡å—ç»„ç»‡ï¼š`scheduler/`ã€`metrics/`ã€`config/`
- âœ… **ç®€æ´æ˜ç¡®** - é¿å…å†—ä½™å½¢å®¹è¯ï¼Œç›´æ¥è¡¨è¾¾æ ¸å¿ƒåŠŸèƒ½
- âœ… **ç»Ÿä¸€é£æ ¼** - ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼Œå…¨å°å†™å­—æ¯

**å‘½åç¤ºä¾‹å¯¹æ¯”**ï¼š
```bash
# âŒ é”™è¯¯å‘½å
enhanced_sac_training_metrics.py   â†’  # âœ… sac_training_metrics.py
train_sac_integrated.py            â†’  # âœ… train_sac.py
restart_tensorboard_clean.sh       â†’  # âœ… restart_tensorboard.sh
enhanced_reward.py                 â†’  # âœ… reward_system.py
train_gru_sac_old.sh              â†’  # âœ… ç›´æ¥åˆ é™¤ï¼Œä¿ç•™train_gru_sac.sh
```

**è¿è§„å¤„ç†**ï¼š
- å‘ç°è¿è§„æ–‡ä»¶åç«‹å³é‡å‘½åæˆ–åˆ é™¤
- ä»£ç å®¡æŸ¥æ—¶å¼ºåˆ¶æ‰§è¡Œæ­¤è§„èŒƒ
- æ–°æ–‡ä»¶åˆ›å»ºå‰å¿…é¡»æ£€æŸ¥å‘½ååˆè§„æ€§

### ğŸ›¡ï¸ é”™è¯¯å¤„ç†å¼ºåˆ¶è§„èŒƒ

```python
# âŒ ä¸¥æ ¼ç¦æ­¢çš„fallbackæ¨¡å¼
try:
    result = complex_operation()
except Exception:
    result = fallback_operation()  # ç¦æ­¢ï¼

# âŒ ä¸¥æ ¼ç¦æ­¢çš„å±æ€§æ£€æŸ¥fallback
if hasattr(obj, 'attribute'):
    return obj.attribute
else:
    return default_value  # ç¦æ­¢ï¼

# âœ… æ­£ç¡®çš„é”™è¯¯å¤„ç†æ–¹å¼
result = complex_operation()  # è®©é”™è¯¯è‡ªç„¶æŠ›å‡º
required_attribute = obj.attribute  # ç›´æ¥è®¿é—®ï¼Œç¼ºå¤±æ—¶æŠ¥é”™
```

**æ ¸å¿ƒè¦æ±‚**ï¼š
- ğŸ”¥ **ç¦æ­¢ä½¿ç”¨try except** - ç¢°è§é”™è¯¯ç›´æ¥æ˜¾ç¤ºtracebackå¹¶é€€å‡ºç»ˆæ­¢è¿è¡Œç¨‹åº
- ğŸ”¥ **ç¦æ­¢é‡‡ç”¨fallbackæ–¹æ¡ˆ** - å¦‚ç¼ºå°‘å±æ€§ç›´æ¥æŠ¥é”™è¿”å›ï¼Œä¸å…è®¸é™çº§å¤„ç†
- âœ… **è®©é”™è¯¯è‡ªç„¶æŠ›å‡º** - ä¾¿äºä»æœ¬è´¨ä¸Šè§£å†³é—®é¢˜ï¼Œè€Œéæ©ç›–é—®é¢˜


### ğŸ”§ è„šæœ¬ç»„ç»‡å’Œæ¨¡å—åŒ–è§„èŒƒ

**è„šæœ¬å¤æ‚åº¦æ§åˆ¶**ï¼š
- âœ… **ç®€å•è„šæœ¬**: ç›´æ¥åœ¨scripts/ä¸­å®ç°ï¼Œæœ€å¤š50è¡Œ
- âœ… **å¤æ‚é€»è¾‘**: å¿…é¡»åˆ†ç¦»åˆ°src/æ¨¡å—ä¸­ï¼Œè„šæœ¬ä»…åšè°ƒç”¨
- âŒ **ç¦æ­¢å†…åµŒ**: ä¸¥ç¦åœ¨è„šæœ¬ä¸­å†™å¤§æ®µPythonä»£ç æˆ–å‡½æ•°
- âŒ **ç¦æ­¢é‡å¤**: ç›¸åŒé€»è¾‘ä¸å¾—åœ¨å¤šä¸ªè„šæœ¬ä¸­é‡å¤å®ç°

**æ¨¡å—åŒ–åˆ†ç¦»åŸåˆ™**ï¼š
```bash
# âŒ é”™è¯¯åšæ³•ï¼šåœ¨è„šæœ¬ä¸­å†…åµŒå¤æ‚é€»è¾‘
train_model.sh:
    python -c "
    import complex_logic
    # 50è¡Œå¤æ‚ä»£ç ...
    "

# âœ… æ­£ç¡®åšæ³•ï¼šåˆ†ç¦»åˆ°æ¨¡å—
src/training/trainer.py:     # å¤æ‚é€»è¾‘åœ¨ç‹¬ç«‹æ¨¡å—
    class ModelTrainer: ...

scripts/train_model.sh:     # è„šæœ¬ä»…åšè°ƒç”¨
    python -m src.training.trainer --config $1
```

**è„šæœ¬èŒè´£è¾¹ç•Œ**ï¼š
- **scripts/**: å‚æ•°ä¼ é€’ã€æµç¨‹æ§åˆ¶ã€çŠ¶æ€æ£€æŸ¥
- **src/**: æ ¸å¿ƒç®—æ³•ã€æ•°æ®å¤„ç†ã€å¤æ‚é€»è¾‘
- **configs/**: å‚æ•°é…ç½®ã€è¶…å‚æ•°è®¾å®š

**é›†æˆvsåˆ†ç¦»å†³ç­–æ ‡å‡†**ï¼š
- **é›†æˆæ¡ä»¶**: åŠŸèƒ½é«˜åº¦ç›¸å…³ä¸”å‚æ•°é…ç½®ä¸€è‡´
- **åˆ†ç¦»æ¡ä»¶**: ç‹¬ç«‹åŠŸèƒ½æ¨¡å—æˆ–å¯å¤ç”¨ç»„ä»¶
- **é‡æ„æ—¶æœº**: è„šæœ¬è¶…è¿‡50è¡Œæˆ–å‡ºç°é‡å¤é€»è¾‘æ—¶

### ç›‘æ§ä½“ç³»

**ä¸‰å±‚ç›‘æ§æ¶æ„**ï¼š
1. **å®æ—¶ç›‘æ§**: TensorBoard (`http://localhost:6006`)
   - è®­ç»ƒè¿‡ç¨‹å®æ—¶æŒ‡æ ‡ç›‘æ§
   - Loss/Rewardè¿ç»­æ›²çº¿
   - è¶…å‚æ•°è®°å½•å’Œå¯¹æ¯”

2. **æ•°æ®å¯¼å‡º**: CSVç»“æ„åŒ–æ•°æ®
   - å®éªŒé…ç½®å’Œå…ƒä¿¡æ¯è®°å½•
   - å„è®­ç»ƒé˜¶æ®µè¯¦ç»†æŒ‡æ ‡
   - FQE/OPEè¯„ä¼°ç»“æœ
